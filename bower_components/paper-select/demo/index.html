<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>paper-select Demo</title>
  <script src="../../webcomponentsjs/webcomponents.js"></script>
  <script>
  window.Polymer = window.Polymer || {};
  window.Polymer.dom = 'shadow';
  </script>
  <link rel="import" href="../../paper-input/paper-input.html">
  <link rel="import" href="../../paper-progress/paper-progress.html">
  <link rel="import" href="../paper-select.html">

  <style>
  body {
    font-size: 16px;
    font-family: 'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    font-weight: 300;
    background-color: #eee !important;
    padding: 20px;
  }
  
  pre {
    font-size: 12px;
  }
  
  main {
    max-width: 800px;
    margin: auto;
    margin-top: 50px;
    margin-bottom: 200px !important;
  }
  
  .card {
    display: block;
    margin: 28px 0;
    font-size: 16px;
    background-color: #fff;
    border-radius: 2px;
    box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.24);
  }
  
  .card > h2 {
    margin: 0;
    padding: 16px;
    background-color: #bbb;
    color: #fff;
    font-size: 18px;
  }
  
  .card > .content {
    padding: 16px;
  }
  </style>


  <script>
  'use strict';

  var data = [{
    id: 1,
    name: "Python"
  }, {
    id: 2,
    name: "JavaScript"
  }, {
    id: 3,
    name: "HTML5"
  }, {
    id: 4,
    name: "CSS3"
  }, {
    id: 5,
    name: "AngularJS"
  }, {
    id: 6,
    name: "Polymer"
  }, {
    id: 7,
    name: "PHP"
  }, {
    id: 8,
    name: "Java"
  }];
  </script>

</head>

<body>

  <main>

    <template id="template" is="dom-bind">

      <section class="card">

        <h2>Data set</h2>

        <div class="content">
          <pre>[[json(data)]]</pre>
        </div>

      </section>

      <section class="card">

        <h2>select-multiple input</h2>

        <div class="content">

          <pre>input: <span>{{json(selectInput1Input)}}</span></pre>

          <paper-select id="selectInput1" multiple unique label-field="name" bind-value="{{selectInput1Value}}" on-input-changed="inputChanged" input="{{selectInput1Input}}" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectInput1Value)}}</span></pre>

          <paper-select id="selectInput2" multiple unique nonmatching on-adding-item="addItem" select-on-blur label-field="name" value-field="id" bind-value="{{selectInput2Value}}" on-input-changed="inputChanged" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectInput2Value)}}</span></pre>

        </div>
      </section>

      <section class="card">

        <h2>select-one input</h2>

        <div class="content">

          <paper-select id="selectOneInput1" label-field="name" bind-value="{{selectOneInput1Value}}" on-input-changed="inputChanged" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectOneInput1Value)}}</span></pre>

          <paper-select id="selectOneInput2" nonmatching on-adding-item="addItem" select-on-blur label-field="name" bind-value="{{selectOneInput2Value}}" on-input-changed="inputChanged" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectOneInput2Value)}}</span></pre>

        </div>

      </section>

      <section class="card">

        <h2>select-multiple with flat value</h2>

        <div class="content">

          <paper-select id="selectInput3" multiple unique bind-value="{{selectInput3Value}}" on-input-changed="inputChanged_" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{selectInput3Value}}</span></pre>

          <paper-select id="selectInput4" multiple unique nonmatching select-on-blur bind-value="{{selectInput4Value}}" on-input-changed="inputChanged_" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectInput4Value)}}</span></pre>

        </div>

      </section>

      <section class="card">

        <h2>select-one with flat value</h2>

        <div class="content">

          <paper-select id="selectOneInput3" label-field="name" bind-value="{{selectOneInput3Value}}" on-input-changed="inputChanged_" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectOneInput3Value)}}</span></pre>

          <paper-select id="selectOneInput4" nonmatching select-on-blur label-field="name" bind-value="{{selectOneInput4Value}}" on-input-changed="inputChanged_" label="Select your favorite programming language">
          </paper-select>

          <pre>value: <span>{{json(selectOneInput4Value)}}</span></pre>

        </div>

      </section>

      <section class="card">

        <h2>input features</h2>

        <div class="content">

          <h3>disabled</h3>

          <paper-select multiple unique label-field="name" value-field="id" bind-value="{{selectInput2Value}}" on-input-changed="inputChanged" label="Select your favorite programming language" disabled>
          </paper-select>

          <h3>readonly</h3>

          <paper-select multiple unique label-field="name" value-field="id" bind-value="{{selectInput2Value}}" on-input-changed="inputChanged" label="Select your favorite programming language" readonly>
          </paper-select>

          <h3>auto-validation</h3>

          <paper-select multiple label-field="name" on-input-changed="inputChanged" auto-validate required error-message="This field is required" label="Select your favorite programming language">
          </paper-select>

        </div>

      </section>

      <section class="card">

        <h2>paper-progress support</h2>

        <div class="content">

          <paper-select multiple nonmatching label-field="name" on-input-changed="inputChanged" label="Select your favorite programming language">
            <paper-progress indeterminate></paper-progress>
          </paper-select>

        </div>

      </section>

      <section class="card">

        <h2>select input with custom not found select action</h2>

        <div class="content">

          <pre>input: <span>{{selectInput6Input}}</span></pre>

          <paper-select id="selectInput6" multiple nonmatching label-field="name" on-input-changed="inputChanged" input="{{selectInput6Input}}" label="Select your favorite programming language">
            <paper-item>
              + <strong style="margin-left: 5px;"> <span>{{selectInput6Input}}</span></strong>
              <paper-ripple></paper-ripple>
            </paper-item>
          </paper-select>

        </div>

      </section>

    </template>

  </main>

  <script>
  'use strict';

  var template = document.querySelector('#template');

  template.json = function(data) {
    return JSON.stringify(data, null, 2);
  };

  template.eventFired = function(e, d) {
    console.log(e.type, d, e);
  };

  template.inputChanged = function(e, d) {
    var input = (e.detail.value || '').trim().toLowerCase();
    if (input)
      e.target.options = data.filter(function(item) {
        return item.name.toLowerCase().indexOf(input) === 0;
      });
    else
      e.target.options = [];
    // console.log('input-changed', e.detail.value, e.target.options);
  };

  template.inputChanged_ = function(e) {
    var input = (e.detail.value || '').trim().toLowerCase();
    if (input)
      e.target.options = data.filter(function(item) {
        return item.name.toLowerCase().indexOf(input) === 0;
      }).map(function(e) {
        return e.name;
      });
    else
      e.target.options = [];
    // console.log('input-changed', e.detail.value, e.target.options);
  };

  template.addItem = function(e) {
    // console.log('adding-item', e.detail.value);
    var input = (e.detail.value || '').trim()
    e.detail.value = {
      name: input
    };
  };

  template.addItemCustom = function(e, d) {
    console.log('adding-item', d, e);
    // ...
  };

  template.addEventListener('dom-change', function() {

    template.data = data;

    template.selectInput2Value = data.slice(1, 3);

    template.selectOneInput2Value = data[0];

    template.selectInput4Value = template.selectInput2Value.map(function(item) {
      return item.name;
    });

    template.selectOneInput4Value = template.selectOneInput2Value.name;

  });
  </script>

</body>

</html>
